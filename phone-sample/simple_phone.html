<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Simple WebRTC Phone</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
        
        <!-- Cache -->
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
        <meta http-equiv="Expires" content="0"/>

        <link rel="icon" type="image/x-icon" href="favicon.ico">

        <!-- Styles -->
        <link rel="stylesheet" type="text/css" href="https://dtd6jl0d42sve.cloudfront.net/lib/Normalize/normalize-v8.0.1.css"/>
        <link rel="stylesheet preload prefetch" type="text/css" as="style" href="https://dtd6jl0d42sve.cloudfront.net/lib/fonts/font_roboto/roboto.css"/>
        <link rel="stylesheet preload prefetch" type="text/css" as="style" href="https://dtd6jl0d42sve.cloudfront.net/lib/fonts/font_awesome/css/font-awesome.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://dtd6jl0d42sve.cloudfront.net/lib/jquery/jquery-ui-1.13.2.min.css"/>
        
        <link rel="stylesheet" type="text/css" href="simple_phone.css"/>
    </head>

    <body>
        <div class="container">
            <h1>Simple WebRTC Phone</h1>
            
            <!-- Registration Panel -->
            <div class="panel">
                <h3>Account Settings</h3>
                <div class="input-group">
                    <label for="wssServer">WebSocket Server:</label>
                    <input type="text" id="wssServer" placeholder="e.g., example.com">
                </div>
                <div class="input-group">
                    <label for="sipUsername">SIP Username:</label>
                    <input type="text" id="sipUsername" placeholder="e.g., 1001">
                </div>
                <div class="input-group">
                    <label for="sipPassword">SIP Password:</label>
                    <input type="password" id="sipPassword" placeholder="password">
                </div>
                <div class="input-group">
                    <label for="sipDomain">SIP Domain:</label>
                    <input type="text" id="sipDomain" placeholder="e.g., example.com">
                </div>
                
                <div style="text-align: center;">
                    <button id="registerBtn" class="btn btn-primary">Register</button>
                    <button id="unregisterBtn" class="btn btn-warning">Unregister</button>
                </div>
                
                <div id="regStatus" class="status unregistered">Not registered</div>
            </div>
            
            <!-- Calling Panel -->
            <div class="panel">
                <h3>Make Call</h3>
                <div class="input-group">
                    <label for="targetNumber">Dial Number:</label>
                    <input type="text" id="targetNumber" placeholder="Enter extension or number to call">
                </div>

                <div class="call-controls">
                    <button id="callBtn" class="btn btn-success"><i class="fa fa-phone"></i> Call</button>
                    <button id="answerBtn" class="btn btn-success" style="display: none;"><i class="fa fa-phone"></i> Answer</button>
                    <button id="hangupBtn" class="btn btn-danger" style="display: none;"><i class="fa fa-phone"></i> Hang Up</button>
                </div>

                <div id="callStatus" class="status" style="display: none;">Ready to call</div>
            </div>
            
            <!-- Media Elements -->
            <div class="panel">
                <h3>Call Media</h3>
                <div class="media-container">
                    <video id="localVideo" autoplay muted playsinline style="display: none;"></video>
                    <video id="remoteVideo" autoplay playsinline style="display: none;"></video>
                    <audio id="remoteAudio" autoplay style="display: none;"></audio>
                </div>
                
                <div class="call-controls">
                    <button id="toggleVideoBtn" class="btn btn-primary">Toggle Video</button>
                    <button id="toggleMuteBtn" class="btn btn-primary">Mute</button>
                </div>
            </div>
            
            <!-- Current Call Info -->
            <div class="panel" id="currentCallPanel" style="display: none;">
                <h3>Current Call</h3>
                <div id="callInfo">No active call</div>
            </div>
        </div>

        <!-- Scripts -->
        <script type="text/javascript" src="https://dtd6jl0d42sve.cloudfront.net/lib/jquery/jquery-3.6.1.min.js"></script>
        <script type="text/javascript" src="https://dtd6jl0d42sve.cloudfront.net/lib/jquery/jquery-ui-1.13.2.min.js"></script>
        <script type="text/javascript" src="https://dtd6jl0d42sve.cloudfront.net/lib/SipJS/sip-0.20.0.min.js"></script>
        <script type="text/javascript" src="simple_phone.js"></script>
    </body>
</html>